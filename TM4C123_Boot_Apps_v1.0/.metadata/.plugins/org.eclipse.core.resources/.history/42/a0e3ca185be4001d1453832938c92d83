#include<stdio.h>
#include "TM4C123GH6PM.h"
#include "GPIO_Driver_Interface.h"
#include "Timer_Interface.h"
#include "ADC_Driver_Interface.h"
#include "Common_Datatype.h"
#include "Common_Macros.h"
//#include "LCD_Interface.h"
#include "I2C_Interface.h"
//#include "SPI_Interface.h"
//#include "MCP3208_Interface.h"
//#include "CAN_Interface.h"
#include "UART_Interface.h"
#include "timercnter_interface.h"
#include "DS3231_Interface.h"
#include "SSD1306_Interface.h"

/******************************************************************************/
void Delay_ms(unsigned int delay_value);

/******************************************************************************/
#define APPS_FLASH_START_ADDR    0x00020000
#define APPS_STACK_PTR_ADDR      0x20004000
#define APPS_STACK_SIZE          4096         // 4KB

/******************************************************************************/
typedef void (*fun_ptr)(void);

/******************************************************************************/
fun_ptr  jump_to_apps = (void(*)(void)) (*((unsigned int*)(APPS_FLASH_START_ADDR + 4)));

unsigned int *apps_stack_ptr = (unsigned int*)(APPS_STACK_PTR_ADDR + APPS_STACK_SIZE);
/******************************************************************************/

void main()
{
    int a = 0 , b = 0;

    DigitalWrite(PF2, HIGH);

    DigitalWrite(PF2, LOW);


    if((*((unsigned int*)(0x00020000 + 4))) != 0xffffffff)
    {
        __set_MSP(apps_stack_ptr);
        jump_to_apps();
    }
    else
    {
        DigitalWrite(PF3,HIGH);
    }

    a = 5;
}

/**************************************************************************************/
Delay_ms(unsigned int delay_value)
{
    int a, b;

    for(a=0 ; a<delay_value ; a++)
    {
        for(b = 0 ; b<3180 ; b++);

    }
}


